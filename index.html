<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year</title>
    <link rel="icon" href="hoa.jpg" type="image/png">
    <link
        href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Thiết lập font Inter làm mặc định và làm cho nó trông thanh lịch hơn */
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;600&display=swap');

        *,
        *::after,
        *::before {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        :root {
            --dark-color: #000;
            --fl-speed: 0.8s;
            --speed-leaf: 2s;
        }

        body {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            min-height: 100vh;
            background-color: rgb(239, 203, 203);
            overflow: hidden;
            perspective: 1000px;
            transition: background-color 1s;
            /* Thêm chuyển đổi nền */
        }

        /* FIX LỖI: Đảm bảo khối nội dung chính có thể bị ẩn mượt mà */
        #contenido-principal {
            position: absolute;
            /* Quan trọng để animation hoạt động tốt */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-end;
            justify-content: center;

            transition: opacity 1s ease-in-out, filter 1s ease-in-out;
            pointer-events: auto;
        }

        #contenido-principal.hide-main {
            opacity: 0;
            pointer-events: none;
            /* Ngăn chặn tương tác khi ẩn */
            filter: blur(5px);
        }

        .night {
            position: fixed;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 100%;
            height: 100%;
            filter: blur(0.1vmin);
            z-index: 0;
        }

        /* Partículas blancas que suben desde abajo */
        .particles {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 3;
        }

        .particle {
            position: absolute;
            bottom: 0;
            width: 0.7vmin;
            height: 0.7vmin;
            background: white;
            border-radius: 50%;
            opacity: 0.7;
            animation: particle-up linear infinite;
        }

        @keyframes particle-up {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.7;
            }

            80% {
                opacity: 0.7;
            }

            100% {
                transform: translateY(-100vh) scale(0.7);
                opacity: 0;
            }
        }

        .shooting-stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .shooting-star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(255, 255, 255, 0.8);
            opacity: 0;
            animation: shootingStar 3s linear infinite;
        }

        .shooting-star::before {
            content: '';
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%);
            animation: shootingStarTail 3s linear infinite;
        }

        .shooting-star:nth-child(1) {
            top: 5%;
            left: -10%;
            animation-delay: 0s;
            animation-duration: 2.5s;
        }

        .shooting-star:nth-child(2) {
            top: 15%;
            left: -10%;
            animation-delay: 2s;
            animation-duration: 3s;
        }

        .shooting-star:nth-child(3) {
            top: 25%;
            left: -10%;
            animation-delay: 4s;
            animation-duration: 2.8s;
        }

        .shooting-star:nth-child(4) {
            top: 0%;
            left: -10%;
            animation-delay: 6s;
            animation-duration: 3.2s;
        }

        .shooting-star:nth-child(5) {
            top: 35%;
            left: -10%;
            animation-delay: 8s;
            animation-duration: 2.7s;
        }

        .shooting-star:nth-child(6) {
            top: 8%;
            left: -10%;
            animation-delay: 10s;
            animation-duration: 3.1s;
        }

        .shooting-star:nth-child(7) {
            top: 45%;
            left: -10%;
            animation-delay: 12s;
            animation-duration: 2.9s;
        }

        .shooting-star:nth-child(8) {
            top: 3%;
            left: -10%;
            animation-delay: 14s;
            animation-duration: 3.3s;
        }

        @keyframes shootingStar {
            0% {
                opacity: 0;
                transform: translateX(0) translateY(0) rotate(45deg);
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateX(120vw) translateY(50vh) rotate(10deg);
            }
        }

        @keyframes shootingStarTail {
            0% {
                width: 0;
            }

            30% {
                width: 100px;
            }

            100% {
                width: 0;
            }
        }

        .flowers {
            position: relative;
            transform: scale(0.7) translateY(-7vmin);
            z-index: 2;
        }

        .flower {
            position: absolute;
            bottom: 30vmin;
            transform-origin: bottom center;
            z-index: 50;
        }

        .flower--1 {
            animation: moving-flower-1 4s linear infinite;
        }

        .flower--1 .flower__line {
            height: 50vmin;
            animation-delay: 0.3s;
        }

        .flower--1 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.6s backwards;
        }

        .flower--1 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.4s backwards;
        }

        .flower--1 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.2s backwards;
        }

        .flower--1 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1s backwards;
        }

        .flower--2 {
            left: 50%;
            transform: rotate(20deg);
            animation: moving-flower-2 4s linear infinite;
        }

        .flower--2 .flower__line {
            height: 45vmin;
            animation-delay: 0.6s;
        }

        .flower--2 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.9s backwards;
        }

        .flower--2 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.7s backwards;
        }

        .flower--2 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.5s backwards;
        }

        .flower--2 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.3s backwards;
        }

        .flower--3 {
            left: 50%;
            transform: rotate(-15deg);
            animation: moving-flower-3 4s linear infinite;
        }

        .flower--3 .flower__line {
            animation-delay: 0.9s;
        }

        .flower--3 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.5s backwards;
        }

        .flower--3 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 2.3s backwards;
        }

        .flower--3 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 2.1s backwards;
        }

        .flower--3 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.9s backwards;
        }

        .flower--4 {
            left: -25%;
            z-index: -6;
            transform: rotate(10deg);
            animation: moving-flower-4 3.5s linear infinite;
        }

        .flower--4 .flower__line {
            height: 40vmin;
            animation-delay: 1.2s;
        }

        .flower--4 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.8s backwards;
        }

        .flower--4 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 2.6s backwards;
        }

        .flower--4 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 2.4s backwards;
        }

        .flower--4 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 2.2s backwards;
        }

        .flower--5 {
            left: 75%;
            z-index: -7;
            transform: rotate(-25deg);
            animation: moving-flower-5 4.5s linear infinite;
        }

        .flower--5 .flower__line {
            height: 52vmin;
            animation-delay: 1.9s;
        }

        .flower--5 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.7s backwards;
        }

        .flower--5 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 2.5s backwards;
        }

        .flower--5 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 2.3s backwards;
        }

        .flower--5 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 2.1s backwards;
        }

        .flower__leafs {
            position: relative;
            animation: blooming-flower 2s backwards;
        }

        .flower__leafs--1 {
            animation-delay: 1.1s;
        }

        .flower__leafs--2 {
            animation-delay: 1.4s;
        }

        .flower__leafs--3 {
            animation-delay: 1.7s;
        }

        .flower__leafs--4 {
            animation-delay: 2.0s;
        }

        .flower__leafs--5 {
            animation-delay: 2.0s;
        }

        .flower__leafs::after {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            transform: translate(-50%, -100%);
            width: 8vmin;
            height: 8vmin;
            background-color: #71f9d9;
            filter: blur(10vmin);
        }

        /* --- cánh hoa tuy lip --- */
        .flower__leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 9vmin;
            height: 15vmin;
            background: radial-gradient(circle at 50% 20%, #F06292 0%, #e761bf 40%, #e4649b 80%, #EC407A 100%);
            border-radius: 50% 50% 40% 40% / 60% 60% 40% 40%;
            transform-origin: bottom center;
            opacity: 0.97;
            z-index: 2;
            border: 1.5px solid #e96599;
            box-shadow: 0 0 1vmin #ffb3de, 0 0 0.5vmin #ffe0f0, inset 0 0 1.5vmin #c2185b;
        }

        /* cánh hoa bên ngoài */
        .flower__leaf--1 {
            transform: translate(-50%, -5%) rotate(-22deg);
            z-index: 1;
        }

        .flower__leaf--2 {
            transform: translate(-50%, -5%) rotate(22deg);
            z-index: 1;
        }

        .flower__leaf--3 {
            transform: translate(-50%, -10%) rotate(0deg);
            z-index: 2;
        }

        /* cánh hao bên trong(nhỏ hơn, để tạo khối) */
        .flower__leaf--4,
        .flower__leaf--5,
        .flower__leaf--6 {
            width: 7vmin;
            height: 12vmin;
            background: radial-gradient(circle at 50% 20%, #ee8ab3 0%, #f06587 40%, #e14797 80%, #d0276a 100%);
            opacity: 0.96;
            border: 1px solid #c2185b;
            border-radius: 50% 50% 45% 45% / 65% 65% 35% 35%;
            box-shadow: 0 0 0.8vmin #ffb3de, inset 0 0 1vmin #ff8fcf;
            z-index: 3;
        }

        .flower__leaf--4 {
            transform: translate(-50%, -8%) rotate(-10deg);
        }

        .flower__leaf--5 {
            transform: translate(-50%, -8%) rotate(10deg);
        }

        .flower__leaf--6 {
            transform: translate(-50%, -12%) rotate(0deg);
        }

        /* trung tâm hoa */
        .flower__center {
            position: absolute;
            left: -2vmin;
            top: -2vmin;
            width: 4vmin;
            height: 4vmin;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #e6b5d7 0%, #ef7396 80%, #f2258c 100%);
            border: 2px solid #fd7d88;
            box-shadow: 0 0 1vmin #e0b3ff, 0 0 0.5vmin #a259e6, inset 0 0 1vmin #e383cd;
        }

        .flower__line {
            height: 55vmin;
            width: 2vmin;
            background-image: linear-gradient(to left, rgb(0, 0, 0, 0.3), transparent, rgba(255, 255, 255, 0.2)),
                linear-gradient(to top, transparent 10%, #2d5016, #4a7c23, #6b8e23);
            box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.7);
            animation: grow-flower-tree 4s backwards;
        }

        .flower__line__leaf {
            --w: 8vmin;
            --h: calc(var(--w) + 3vmin);
            position: absolute;
            top: 20%;
            left: 90%;
            width: var(--w);
            height: var(--h);
            border-top-right-radius: var(--h);
            border-bottom-left-radius: var(--h);
            background-image: linear-gradient(to top, rgba(45, 80, 22, 0.6), #4a7c23, #6b8e23);
            box-shadow: inset 0 0 1vmin rgba(0, 0, 0, 0.3);
        }

        .flower__line__leaf--1 {
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--2 {
            top: 45%;
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--3,
        .flower__line__leaf--4 {
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-top-left-radius: var(--h);
            border-bottom-right-radius: var(--h);
            left: -460%;
            top: 12%;
            transform: rotate(-70deg) rotateY(30deg);
        }

        .flower__line__leaf--4 {
            top: 40%;
        }

        .flower__light {
            position: absolute;
            bottom: 0vmin;
            width: 0.8vmin;
            height: 0.8vmin;
            background-color: #fff;
            border-radius: 50%;
            filter: blur(0.1vmin);
            animation: tulip-light 6s linear infinite backwards;
            box-shadow: 0 0 1vmin rgba(255, 255, 255, 0.8);
        }

        .flower__light:nth-child(odd) {
            background-color: #fff;
        }

        .flower__light--1 {
            left: -2vmin;
            animation-delay: 1s;
        }

        .flower__light--2 {
            left: 3vmin;
            animation-delay: 0.5s;
        }

        .flower__light--3 {
            left: -6vmin;
            animation-delay: 0.3s;
        }

        .flower__light--4 {
            left: 6vmin;
            animation-delay: 0.9s;
        }

        .flower__light--5 {
            left: -1vmin;
            animation-delay: 1.5s;
        }

        .flower__light--6 {
            left: -4vmin;
            animation-delay: 3s;
        }

        .flower__light--7 {
            left: 3vmin;
            animation-delay: 2s;
        }

        .flower__light--8 {
            left: -6vmin;
            animation-delay: 3.5s;
        }

        .flower__grass {
            --c: #4a7c23;
            --line-w: 2vmin;
            position: absolute;
            bottom: 12vmin;
            left: -7vmin;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            z-index: 20;
            transform-origin: bottom center;
            transform: rotate(-48deg) rotateY(40deg);
        }

        .flower__grass--1 {
            animation: moving-grass 2s linear infinite;
        }

        .flower__grass--2 {
            left: 2vmin;
            bottom: 10vmin;
            transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg);
            opacity: 0.8;
            z-index: 0;
            animation: moving-grass--2 1.5s linear infinite;
        }

        .flower__grass--3 {
            left: -25vmin;
            bottom: 8vmin;
            transform: scale(0.7) rotate(-30deg) rotateY(45deg);
            opacity: 0.9;
            z-index: 15;
            animation: moving-grass--3 2.2s linear infinite;
        }

        .flower__grass--4 {
            left: -35vmin;
            bottom: 15vmin;
            transform: scale(0.4) rotate(60deg) rotateX(15deg) rotateY(-180deg);
            opacity: 0.7;
            z-index: 5;
            animation: moving-grass--4 1.8s linear infinite;
        }

        .flower__grass--5 {
            left: -18vmin;
            bottom: 6vmin;
            transform: scale(0.6) rotate(-60deg) rotateY(60deg);
            opacity: 0.85;
            z-index: 12;
            animation: moving-grass--5 2.5s linear infinite;
        }

        .flower__grass--6 {
            left: 25vmin;
            bottom: 9vmin;
            transform: scale(0.65) rotate(35deg) rotateY(-45deg);
            opacity: 0.9;
            z-index: 15;
            animation: moving-grass--6 2.3s linear infinite;
        }

        .flower__grass--7 {
            left: 35vmin;
            bottom: 14vmin;
            transform: scale(0.45) rotate(-70deg) rotateX(20deg) rotateY(170deg);
            opacity: 0.75;
            z-index: 8;
            animation: moving-grass--7 1.9s linear infinite;
        }

        .flower__grass--8 {
            left: 18vmin;
            bottom: 5vmin;
            transform: scale(0.55) rotate(50deg) rotateY(-70deg);
            opacity: 0.8;
            z-index: 10;
            animation: moving-grass--8 2.1s linear infinite;
        }

        .flower__grass--9 {
            left: -45vmin;
            bottom: 20vmin;
            transform: scale(0.3) rotate(20deg) rotateY(90deg);
            opacity: 0.6;
            z-index: 2;
            animation: moving-grass--9 1.6s linear infinite;
        }

        .flower__grass--10 {
            left: 42vmin;
            bottom: 18vmin;
            transform: scale(0.35) rotate(-45deg) rotateY(-120deg);
            opacity: 0.65;
            z-index: 3;
            animation: moving-grass--10 2.0s linear infinite;
        }

        .flower__grass__overlay {
            position: absolute;
            top: -10%;
            right: 0%;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            filter: blur(1.5vmin);
            z-index: 100;
        }

        .special-text {
            position: fixed;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-family: 'Arial', sans-serif;
            font-size: 4vmin;
            text-shadow: 0 0 8px #fff, 0 0 16px #fff, 0 0 32px #00eaff, 0 0 48px #00eaff;
            z-index: 10;
            opacity: 0;
            animation: fadeIn 3s 1s forwards, glowText 2s 4s infinite alternate;
            text-align: center;
        }

        @keyframes glowText {
            0% {
                text-shadow: 0 0 8px #fff, 0 0 16px #fff, 0 0 32px #00eaff, 0 0 48px #00eaff;
            }

            100% {
                text-shadow: 0 0 16px #fff, 0 0 32px #fff, 0 0 64px #00eaff, 0 0 96px #00eaff;
            }
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @keyframes tulip-light {
            0% {
                opacity: 0;
                transform: translateY(0vmin) rotate(0deg);
            }

            100% {
                transform: translateY(-25vmin) rotate(225deg);
                opacity: 0;
            }
        }

        @keyframes moving-flower-1 {

            0%,
            100% {
                transform: rotate(2deg);
            }

            50% {
                transform: rotate(-2deg);
            }
        }

        @keyframes moving-flower-2 {

            0%,
            100% {
                transform: rotate(18deg);
            }

            50% {
                transform: rotate(14deg);
            }
        }

        @keyframes moving-flower-3 {

            0%,
            100% {
                transform: rotate(-18deg);
            }

            50% {
                transform: rotate(-20deg) rotateY(-10deg);
            }
        }

        @keyframes moving-flower-4 {

            0%,
            100% {
                transform: rotate(9deg);
            }

            50% {
                transform: rotate(12deg) rotateY(9deg);
            }
        }

        @keyframes moving-flower-5 {

            0%,
            100% {
                transform: rotate(-5deg);
            }

            50% {
                transform: rotate(-11deg) rotateY(5deg);
            }
        }

        @keyframes blooming-leaf-right {
            0% {
                transform-origin: left;
                transform: rotate(70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes blooming-leaf-left {
            0% {
                transform-origin: right;
                transform: rotate(-70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes grow-flower-tree {
            0% {
                height: 0;
                border-radius: 1vmin;
            }
        }

        @keyframes blooming-flower {
            0% {
                transform: scale(0);
            }
        }

        @keyframes moving-grass {

            0%,
            100% {
                transform: rotate(-48deg) rotateY(40deg);
            }

            50% {
                transform: rotate(-50deg) rotateY(40deg);
            }
        }

        @keyframes moving-grass--2 {

            0%,
            100% {
                transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg);
            }

            50% {
                transform: scale(0.5) rotate(79deg) rotateX(10deg) rotateY(-200deg);
            }
        }

        @keyframes moving-grass--3 {

            0%,
            100% {
                transform: scale(0.7) rotate(-30deg) rotateY(45deg);
            }

            50% {
                transform: scale(0.7) rotate(-33deg) rotateY(50deg);
            }
        }

        @keyframes moving-grass--4 {

            0%,
            100% {
                transform: scale(0.4) rotate(60deg) rotateX(15deg) rotateY(-180deg);
            }

            50% {
                transform: scale(0.4) rotate(63deg) rotateX(18deg) rotateY(-175deg);
            }
        }

        @keyframes moving-grass--5 {

            0%,
            100% {
                transform: scale(0.6) rotate(-60deg) rotateY(60deg);
            }

            50% {
                transform: scale(0.6) rotate(-57deg) rotateY(65deg);
            }
        }

        @keyframes moving-grass--6 {

            0%,
            100% {
                transform: scale(0.65) rotate(35deg) rotateY(-45deg);
            }

            50% {
                transform: scale(0.65) rotate(38deg) rotateY(-40deg);
            }
        }

        @keyframes moving-grass--7 {

            0%,
            100% {
                transform: scale(0.45) rotate(-70deg) rotateX(20deg) rotateY(170deg);
            }

            50% {
                transform: scale(0.45) rotate(-67deg) rotateX(23deg) rotateY(175deg);
            }
        }

        @keyframes moving-grass--8 {

            0%,
            100% {
                transform: scale(0.55) rotate(50deg) rotateY(-70deg);
            }

            50% {
                transform: scale(0.55) rotate(53deg) rotateY(-65deg);
            }
        }

        @keyframes moving-grass--9 {

            0%,
            100% {
                transform: scale(0.3) rotate(20deg) rotateY(90deg);
            }

            50% {
                transform: scale(0.3) rotate(23deg) rotateY(95deg);
            }
        }

        @keyframes moving-grass--10 {

            0%,
            100% {
                transform: scale(0.35) rotate(-45deg) rotateY(-120deg);
            }

            50% {
                transform: scale(0.35) rotate(-42deg) rotateY(-115deg);
            }
        }

        .ramo {
            position: absolute;
            bottom: 12vmin;
            left: 50%;
            transform: translateX(-50%);
            z-index: 0;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.2s cubic-bezier(.4, 0, .2, 1);
        }

        .ramo--visible {
            opacity: 1;
        }

        .ramo img {
            width: 60vmin;
            height: auto;
            display: block;
        }

        .montes {
            position: absolute;
            left: 0;
            right: 0;
            bottom: -10px;
            width: 100%;
            height: 60px;
            pointer-events: none;
            display: flex;
            justify-content: space-between;
            opacity: 0;
            transition: opacity 1.2s cubic-bezier(.4, 0, .2, 1);
            z-index: 1;
        }

        .ramo--visible .montes {
            opacity: 1;
        }

        .monte {
            display: block;
        }

        .monte-izq {
            margin-left: -30px;
        }

        .monte-der {
            margin-right: -30px;
        }

        /* --- STYLE CHO LÁ THƯ NHỎ --- */
        .letter-with-heart {
            position: absolute;
            left: 50%;
            bottom: 21vmin;
            transform: translateX(-50%) rotate(0deg);
            width: 26vmin;
            height: 14vmin;
            background-image: url('thu.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-color: transparent;
            z-index: 1000;
            cursor: pointer;
            display: none;
            opacity: 0;
            transition: opacity 1.2s ease-in-out, transform 1.2s ease-in-out;
        }

        .letter-with-heart.show-letter {
            display: block;
            opacity: 1;
        }

        @keyframes floatLetter {

            0%,
            100% {
                transform: translateX(-50%) translateY(0) rotate(0deg);
            }

            50% {
                transform: translateX(-50%) translateY(-1vmin) rotate(1deg);
            }
        }

        /* --- STYLE CHO MODAL KHỞI ĐẦU --- */
        .modal-inicio {
            cursor: pointer;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 300;
            background: rgba(247, 244, 244, 0.98);
            backdrop-filter: blur(2.5px) brightness(1.05);
            animation: modalFadeIn 1.2s;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-contenido {
            background: #fff;
            border-radius: 32px;
            box-shadow: 0 8px 48px #a8000022, 0 0 0 6px #fff3;
            padding: 3.5em 2.5em 2.5em 2.5em;
            text-align: center;
            min-width: 320px;
            max-width: 90vw;
            border: 2.5px solid #a80000;
            position: relative;
            animation: modalContentPop 1.2s cubic-bezier(.4, 0, .2, 1);
        }

        @keyframes modalContentPop {
            0% {
                transform: scale(0.7) translateY(40px);
                opacity: 0;
            }

            80% {
                transform: scale(1.05) translateY(-8px);
                opacity: 1;
            }

            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .modal-titulo {
            font-size: 2.2em;
            font-family: 'Segoe Script', 'Comic Sans MS', cursive;
            color: #a80000;
            margin-bottom: 0.5em;
            text-shadow: 0 2px 16px #a8000033, 0 0 2px #fff;
            letter-spacing: 1px;
        }

        .modal-texto {
            font-size: 1.2em;
            color: #222;
            margin-bottom: 2em;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            text-shadow: 0 1px 8px #fff8, 0 0 2px #a8000022;
        }

        .btn-para-ti {
            padding: 1.2em 2.7em;
            font-size: 1.5em;
            border-radius: 30px;
            background: #fff;
            color: #a80000;
            border: 2.5px solid #a80000;
            box-shadow: 0 0 24px #a8000022, 0 0 48px #fffbe622;
            cursor: pointer;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            letter-spacing: 1px;
            transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
            position: relative;
            overflow: hidden;
        }

        .btn-para-ti::after {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            border-radius: 30px;
            background: radial-gradient(circle at 60% 40%, #fff3 0%, #a80000 10%);
            opacity: 0.08;
            pointer-events: none;
        }

        .btn-para-ti:hover {
            background: #f8f8f8;
            box-shadow: 0 0 32px #fffbe6cc, 0 0 64px #a8000022;
            transform: scale(1.05);
        }

        .btn-para-ti:active {
            transform: scale(0.98);
            box-shadow: 0 0 16px #a8000022;
        }

        /* --- STYLE CHO MODAL LÁ THƯ NỘI DUNG (Mới) --- */
        #letter-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(239, 203, 203, 0.98);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s;
        }

        #letter-modal.show-modal {
            opacity: 1;
            visibility: visible;
        }

        .letter-content {
            position: relative;
            background-color: #fff;
            padding: 5vmin;
            border-radius: 1.5vmin;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25), 0 0 0 10px rgba(255, 255, 255, 0.8);
            width: 90vw;
            max-width: 800px;
            height: 90vh;
            max-height: 950px;
            overflow-y: auto;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.6s cubic-bezier(.4, 0, .2, 1);
        }

        #letter-modal.show-modal .letter-content {
            transform: scale(1);
        }

        .letter-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 1vmin;
            max-width: 100%;
            object-fit: contain;
        }

        .close-btn {
            position: absolute;
            top: 1.5vmin;
            right: 1.5vmin;
            background: #a80000;
            color: white;
            border: none;
            border-radius: 50%;
            width: 5vmin;
            height: 5vmin;
            font-size: 3vmin;
            cursor: pointer;
            line-height: 5vmin;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: background 0.3s, transform 0.2s;
            z-index: 10;
        }

        .close-btn:hover {
            background: #c2185b;
            transform: scale(1.1);
        }

        /* Media Query cho màn hình nhỏ (điện thoại) */
        @media (max-width: 600px) {
            .letter-content {
                padding: 3vmin;
                width: 95vw;
                height: 95vh;
            }

            .close-btn {
                width: 7vmin;
                height: 7vmin;
                font-size: 4vmin;
                line-height: 7vmin;
            }
        }


        /* Phong cách chữ viết tay/ lãng mạn */
        .handwritten-font {
            font-family: 'Dancing Script', cursive;
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {
            .card-container {
                padding: 20px;
            }

            .text-5xl {
                font-size: 2.5rem;
                /* Điều chỉnh kích thước font lớn trên mobile */
            }

            .text-3xl {
                font-size: 1.5rem;
            }
        }

        /* Hiệu ứng Glow cho tiêu đề */
        .text-glow {
            text-shadow: 0 0 5px #f9a8d4, 0 0 10px #f9a8d4;
        }

        .center-message {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: 400;
            color: #c2185b;
            text-align: center;
            z-index: 1;
            max-width: 90%;
            animation: pulse 3s ease-in-out infinite;
            backdrop-filter: blur(10px);
        }

        @keyframes pulse {

            0%,
            100% {
                transform: translate(-50%, -50%) scale(1);
            }

            50% {
                transform: translate(-50%, -50%) scale(1.05);
            }
        }

        .center-message strong {
            display: block;
            font-size: 2.2rem;
            margin-bottom: 15px;
            font-weight: 700;
            background: linear-gradient(35deg, #d81b60, #f06292, #d81b60);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s linear infinite;
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 99;
            display: none;
            animation: fadeInOverlay 0.3s ease;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .overlay.active {
            display: block;
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, #ffffff 0%, #fff5f8 100%);
            border-radius: 25px;
            box-shadow: 0 25px 80px rgba(216, 27, 96, 0.4);
            padding: 30px;
            z-index: 9999;
            text-align: center;
            width: 90%;
            max-width: 400px;
            display: none;
            animation: popupShow 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            border: 3px solid rgba(255, 255, 255, 0.8);
        }

        @keyframes popupShow {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5) rotate(-5deg);
            }

            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .popup-content {
            margin-top: 20px;
        }

        .popup img {
            display: block;
            margin: 0 auto;
            width: 90%;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid white;
        }

        .popup p {
            font-size: 1.1rem;
            color: #d81b60;
            line-height: 1.6;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .popup button {
            margin-top: 10px;
            background: linear-gradient(135deg, #d81b60 0%, #f06292 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(216, 27, 96, 0.4);
            transition: all 0.3s ease;
        }

        .popup button:hover {
            background: linear-gradient(135deg, #ad1457 0%, #e91e63 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(216, 27, 96, 0.5);
        }

        .popup button:active {
            transform: translateY(0);
        }

        .falling-letter {
            position: absolute;
            top: -100px;
            width: 50px;
            height: auto;
            animation: fall linear;
            cursor: pointer;
            user-select: none;
            z-index: 2;
            animation-duration: 8s;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
            transition: transform 0.3s ease;
        }

        .falling-letter:hover {
            transform: scale(1.2) rotate(10deg);
            filter: drop-shadow(0 10px 20px rgba(216, 27, 96, 0.4));
        }

        @keyframes fall {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 1;
            }

            20% {
                transform: translateY(20vh) translateX(-20px) rotate(-10deg);
            }

            40% {
                transform: translateY(40vh) translateX(15px) rotate(8deg);
            }

            60% {
                transform: translateY(60vh) translateX(-15px) rotate(-6deg);
            }

            80% {
                transform: translateY(80vh) translateX(10px) rotate(4deg);
            }

            100% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0.3;
            }
        }

        @keyframes letterClick {
            0% {
                transform: scale(1) rotate(0deg);
            }

            50% {
                transform: scale(1.3) rotate(360deg);
            }

            100% {
                transform: scale(0) rotate(720deg);
            }
        }

        .letter-clicked {
            animation: letterClick 0.6s ease-out forwards !important;
        }

        .heart {
            position: absolute;
            transform: translate(-50%, -50%);
            animation: explode 2s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) translate(0, 0);
                opacity: 0;
            }
        }


        .center-message,
        .center-message *,
        .popup,
        .popup * {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            pointer-events: auto;
        }

        @media (max-width: 768px) {
            .center-message {
                width: calc(100% - 20px);
                max-width: none;
                padding: 20px 15px;
                font-size: 1.1rem;
                border-radius: 20px;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .center-message strong {
                font-size: 1.3rem;
                margin-bottom: 10px;
            }

            .popup {
                width: 60%;
                padding: 15px;
                border-radius: 20px;
            }

            .popup img {
                border-radius: 10px;
                margin-bottom: 15px;
            }

            .popup p {
                font-size: 1rem;
                line-height: 1.5;
            }

            .popup button {
                padding: 10px 25px;
                font-size: 0.95rem;
            }

            .falling-letter {
                width: 40px;
                animation-duration: 9s;
            }

            .heart {
                font-size: 18px !important;
            }

            .falling-letter::before {
                position: absolute;
                top: -10px;
                left: -10px;
                right: -10px;
                bottom: -10px;
            }
        }
    </style>
</head>

<body class="not-loaded">
    <div id="pantalla-inicial" class="modal-inicio">
        <div class="modal-contenido">
            <div class="modal-titulo">Chào Thư</div>
            <div class="modal-texto">Nhấp vào nút có điều bí mật cho Bà nè</div>
            <button id="btn-para-ti" class="btn-para-ti">Ấn vào đây</button>
        </div>
        <audio id="audio-para-ti" src="nhac.mp3"></audio>
    </div>

    <div id="contenido-principal" style="display:none;">
        <div class="night"></div>
        <div class="particles"></div>
        <div class="shooting-stars">
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
            <div class="shooting-star"></div>
        </div>
        <div class="flowers">
            <div class="flower flower--1">
                <div class="flower__leafs flower__leafs--1">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>
            <div class="flower flower--2">
                <div class="flower__leafs flower__leafs--2">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>
            <div class="flower flower--3">
                <div class="flower__leafs flower__leafs--3">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>
            <div class="flower flower--4">
                <div class="flower__leafs flower__leafs--4">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>
            <div class="flower flower--5">
                <div class="flower__leafs flower__leafs--5">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>
            <div class="flower flower--6" style="left:20%;transform:rotate(-10deg);z-index:40;">
                <div class="flower__leafs flower__leafs--6">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                </div>
                <div class="flower__line"></div>
            </div>
            <div class="flower flower--7" style="left:80%;transform:rotate(15deg);z-index:40;">
                <div class="flower__leafs flower__leafs--7">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                </div>
                <div class="flower__line"></div>
            </div>
            <div class="flower flower--8" style="left:35%;transform:rotate(-25deg);z-index:30;">
                <div class="flower__leafs flower__leafs--8">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                </div>
                <div class="flower__line"></div>
            </div>
            <div class="flower flower--9" style="left:65%;transform:rotate(25deg);z-index:30;">
                <div class="flower__leafs flower__leafs--9">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__leaf flower__leaf--5"></div>
                    <div class="flower__leaf flower__leaf--6"></div>
                    <div class="flower__center"></div>
                </div>
                <div class="flower__line"></div>
            </div>
        </div>

        <div id="the-letter" class="letter-with-heart"></div>

        <div class="ramo">
            <img src="https://i.postimg.cc/QxCQJ4y3/unnamed.png" alt="giấy gói hoa">
            <div class="montes">
            </div>
        </div>
    </div>

    <div id="letter-modal">
        <div class="letter-content">
            <button class="close-btn" id="close-letter-btn">X</button>
            <div class="card-container text-center">
                <!-- Tiêu đề chính -->
                <h1 class="handwritten-font text-5xl sm:text-6xl font-bold text-pink-600 mb-6 text-glow">
                    Chúc Mừng Sinh Nhật 🎂
                </h1>
                <p class="text-xl sm:text-2xl text-gray-700 mb-8">
                    Gửi Thư – Cô gái đặc biệt!
                </p>

                <!-- Khung thiệp với lời chúc chân thành -->
                <div class="bg-pink-50 p-6 sm:p-10 rounded-xl border-4 border-dashed border-pink-300">
                    <div class="handwritten-font text-3xl sm:text-4xl text-pink-700 leading-relaxed">
                        <p class="mb-4 text-gray-800 font-normal text-2xl">
                            Hôm nay là ngày sinh nhật của bà, tui muốn gửi đến bà những lời chúc tốt đẹp và chân thành
                            nhất. Mong rằng tuổi mới sẽ mang đến cho bà thật nhiều niềm vui, bình an và những điều ngọt
                            ngào.
                        </p>
                        <p class="mb-4 text-gray-800 font-normal text-2xl">
                            Bà luôn là người mang lại cảm giác dễ chịu, tích cực và những khoảnh khắc đáng quý. Hy vọng
                            mỗi ngày trôi qua, bà đều mỉm cười nhiều hơn, sống đúng với những gì mình mong muốn và luôn
                            tự tin tỏa sáng theo cách riêng của mình.
                        </p>
                        <p class="text-gray-800 font-normal text-2xl">
                            Chúc Thư tuổi mới thật xinh đẹp, hạnh phúc, nhiều may mắn, học tập – công việc thuận lợi và
                            luôn gặp những điều tốt lành.
                        </p>
                    </div>
                </div>

                <!-- Chữ ký và lời hứa -->
                <div class="mt-8">
                    <p class="text-lg sm:text-xl text-gray-600 mb-2">
                        Chúc mừng sinh nhật Thư 💖
                    </p>
                    <p class="text-xl font-semibold text-pink-500 mt-2">
                        — Hoàn (Freddy) —
                    </p>
                </div>

            </div>

        </div>
    </div>

    <div class="center-message">
        <strong>Happy New Year</strong>
        <span id="centerText">
            Bấm vào bức thư để xem điều bất ngờ nè<br>
        </span>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <img id="popupImage" src="" alt="loi chuc">
            <p id="popupMessage">Lời chúc ở đây</p>
        </div>
    </div>
    <div class="overlay" id="overlay">
    </div>

    <script>
        // Generar partículas blancas animadas que suben desde abajo
        function randomBetween(a, b) { return Math.random() * (b - a) + a; }
        function createParticles() {
            const particlesContainer = document.querySelector('.particles');
            const numParticles = 40;
            for (let i = 0; i < numParticles; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = randomBetween(0, 100) + 'vw';
                const size = randomBetween(0.5, 1.5);
                p.style.width = size + 'vmin';
                p.style.height = size + 'vmin';
                const duration = randomBetween(3, 7);
                const delay = randomBetween(0, 5);
                p.style.animationDuration = duration + 's';
                p.style.animationDelay = delay + 's';
                p.style.opacity = randomBetween(0.4, 0.9);
                particlesContainer.appendChild(p);
            }
        }
        createParticles();
        document.body.classList.remove('not-loaded');

        /* FIX LỖI QUAN TRỌNG: Định nghĩa các biến DOM ở đây */
        const letterIcon = document.getElementById('the-letter');
        const mainContent = document.getElementById('contenido-principal');
        const letterModal = document.getElementById('letter-modal');
        const closeLetterBtn = document.getElementById('close-letter-btn');

        // Khởi động
        document.getElementById('btn-para-ti').onclick = function () {
            var audio = document.getElementById('audio-para-ti');
            audio.currentTime = 0;
            audio.play();

            document.getElementById('pantalla-inicial').style.display = 'none';
            // FIX: Sử dụng 'flex' để căn giữa nội dung chính 
            mainContent.style.display = 'flex';

            // Đợi hoa nở (2.5s)
            setTimeout(function () {
                document.querySelector('.ramo').classList.add('ramo--visible');
                // HIỂN THỊ LÁ THƯ ICON
                letterIcon.classList.add('show-letter');
            }, 2500);
        };

        /* --- LOGIC XỬ LÝ SỰ KIỆN NHẤP VÀO LÁ THƯ (Đã sửa) --- */

        // 1. Mở lá thư (Nhấp vào icon lá thư)
        letterIcon.addEventListener('click', function () {
            // Bắt đầu hiệu ứng ẩn nội dung chính
            mainContent.classList.add('hide-main');

            // Đợi cho hiệu ứng ẩn hoàn tất (1s)
            setTimeout(() => {
                // Hiển thị modal lá thư
                letterModal.classList.add('show-modal');
                document.body.style.backgroundColor = 'white'; // Thay đổi nền khi mở thư
            }, 1000);
        });

        // 2. Đóng lá thư (Nhấp vào nút X)
        closeLetterBtn.addEventListener('click', function () {
            // Ẩn modal lá thư
            letterModal.classList.remove('show-modal');
            document.body.style.backgroundColor = 'rgb(239, 203, 203)'; // Trả lại màu nền

            // Đợi cho hiệu ứng đóng hoàn tất (0.5s)
            setTimeout(() => {
                // Hiện lại các thành phần bằng cách loại bỏ class 'hide-main'
                mainContent.classList.remove('hide-main');

            }, 500);
        });
        const messages = [
            {
                img: "Anh1.png",
                text: "Chúc mừng sinh nhật bà 🎂 Mong mọi điều ngọt ngào nhất sẽ đến với bà hôm nay 💖"
            },
            {
                img: "Anh5.png",
                text: "Tuổi mới rồi, chúc bà luôn xinh đẹp, rạng rỡ và cười thật nhiều nha ✨"
            },
            {
                img: "Anh6.png",
                text: "Mong bà luôn vui vẻ, hồn nhiên và được yêu thương thật nhiều 💕"
            },
            {
                img: "Anh4.png",
                text: "Sinh nhật này chúc bà thật nhiều sức khỏe và luôn tự tin là chính mình 🌷"
            },
            {
                img: "Anh7.png",
                text: "Có những khoảnh khắc rất bình thường, nhưng lại đáng nhớ vô cùng 💫"
            },
            {
                img: "Anh2.png",
                text: "Tuổi mới thêm niềm vui mới, thêm kỷ niệm đẹp và thêm hạnh phúc nhé bà 😊"
            },
            {
                img: "Anh3.png",
                text: "Chúc bà một tuổi mới thật trọn vẹn – luôn được yêu thương và mỉm cười 💝"
            },
            {
                img: "Anh8.jpg",
                text: "Hoa xinh, người cũng xinh một chút 🌸"
            }
        ];


        let currentMessageIndex = 0;
        let hasFirstLetterFallen = false;

        const popup = document.getElementById("popup");
        const overlay = document.getElementById("overlay");
        const popupMessage = document.getElementById("popupMessage");
        const popupImage = document.getElementById("popupImage");
        const centerText = document.getElementById("centerText");

        const letterImages = ["hoa.png", "hoa1.png", "qua.png", "qua1.png"];

        function createHeartExplosion(x, y) {
            const hearts = ['❤️'];
            const numHearts = 12;

            for (let i = 0; i < numHearts; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];

                const angle = (Math.PI * 2 / numHearts) * i;
                const distance = Math.random() * 80 + 40;

                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
                heart.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
                heart.style.fontSize = (Math.random() * 10 + 20) + 'px';

                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 2000);
            }
        }

        function createFallingLetter() {
            const letter = document.createElement('img');
            const randomImage = letterImages[Math.floor(Math.random() * letterImages.length)];
            letter.src = randomImage;
            letter.classList.add("falling-letter");
            letter.style.left = Math.random() * (window.innerWidth - 50) + "px";

            letter.addEventListener("click", (e) => {
                createHeartExplosion(e.clientX, e.clientY);
                letter.classList.add('letter-clicked');
                setTimeout(() => showPopup(), 300);
            });
            document.body.appendChild(letter);
            setTimeout(() => letter.remove(), 8000);
        }

        function showPopup() {
            const msg = messages[currentMessageIndex];
            popupImage.src = msg.img;
            popupMessage.textContent = msg.text;
            popup.style.display = "block";
            overlay.classList.add("active");

            popup.dataset.currentMessage = msg.text;

            currentMessageIndex = (currentMessageIndex + 1) % messages.length;
        }

        function closePopup() {
            popup.style.display = 'none';
            overlay.classList.remove("active");

            if (popup.dataset.currentMessage) {
                centerText.innerHTML = popup.dataset.currentMessage;
            }
        }

        document.body.addEventListener("click", function () {
            const player = document.getElementById("player");
            if (player.paused) {
                player.play();
            }
        })

        overlay.addEventListener("click", closePopup);
        setInterval(() => createFallingLetter(), 1000);
    </script>
</body>

</html>